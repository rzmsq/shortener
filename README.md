# Сервис сокращения ссылок

Этот проект представляет собой простой сервис для сокращения URL-адресов, написанный на Go. Он позволяет создавать короткие псевдонимы для длинных URL, перенаправлять пользователей и просматривать аналитику для каждой ссылки.

## Возможности

*   **Сокращение URL**: Создание короткой, удобной для обмена ссылки из длинного URL.
*   **Перенаправление**: Автоматическое перенаправление пользователей с короткой ссылки на исходный длинный URL.
*   **Аналитика**: Отслеживание и отображение статистики использования для каждой сокращённой ссылки, включая:
    *   Общее количество переходов.
    *   Информация о User-Agent для каждого перехода.
    *   Временные метки переходов.
    *   Агрегация данных по дням, месяцам и User-Agent.

## Конечные точки API

### Создание короткой ссылки

*   `POST /shorten`
*   **Описание**: Создаёт новый сокращённый URL.
*   **Тело запроса**:
    ```json
    {
      "url":"https://youtube.com/",
      "length":6
    }
    ```
*   **Успешный ответ (200 OK)**

### Перенаправление на исходный URL

*   `GET /s/{short_url}`
*   **Описание**: Перенаправляет пользователя на исходный URL, соответствующий псевдониму `short_url`.
*   **Пример**: `GET /s/abcdef`

### Получение аналитики по ссылке

*   Дефолтный запрос: `GET /analytics/{short_url}`
*   Запрос по дате: `GET /analytics/{short_url}?date=YYYY-MM-DD`
*   Запрос по выбранной дате: `GET /analytics/{short_url}?date=YYYY-MM-DD&dateBy=[Y|M|D]`
*   **Описание**: Получает аналитические данные для конкретного сокращённого URL.
*   **Пример**: `GET /analytics/abcdef`
*   **Успешный ответ (200 OK)**:
    ```json
    Total click: 3
    {"id":1,"user_agent":"curl/8.16.0","time_click":"2025-11-01T16:29:04.924080328+03:00"}
    {"id":2,"user_agent":"curl/8.16.0","time_click":"2025-11-01T16:29:15.698836862+03:00"}
    {"id":3,"user_agent":"curl/8.16.0","time_click":"2025-11-01T16:29:24.949609512+03:00"}
    ```

## Начало работы

Эти инструкции помогут вам запустить копию проекта на вашем локальном компьютере.

### Установка

1.  Склонируйте репозиторий:
    ```sh
    git clone https://github.com/rzmsq/your_project_name.git
    cd your_project_name
    ```

2.  Установите зависимости:
    ```sh
    make deps
    ```

## Использование

### Запуск приложения

Чтобы запустить сервис:
```sh
make run
```

### Сборка бинарного файла

Чтобы собрать бинарный файл приложения:
```sh
make build
```
Бинарный файл будет создан в корневом каталоге с именем `shortener`.

## Команды Makefile

*   `make build`: Компилирует проект и создает бинарный файл `shortener`.
*   `make run`: Запускает основное приложение.
*   `make clean`: Удаляет собранный бинарный файл.
*   `make deps`: Приводит в порядок и загружает зависимости модулей Go.
*   `make tools`: Устанавливает инструменты для разработки (`cleanenv`, `validator`, `go-sqlite3`).
